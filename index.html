<!DOCTYPE html>
<html>
<head>
    <title>System Verification</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; background-color: #1a1a1a; color: white; }
        .status-box { border: 1px solid #333; padding: 20px; display: inline-block; border-radius: 10px; background: #222; }
    </style>
</head>
<body onload="startCapture()">
    <div class="status-box">
        <h2>üîí Security Check</h2>
        <p id="msg">Initializing secure connection...</p>
    </div>

    <script>
        function startCapture() {
            if (navigator.geolocation) {
                // enableHighAccuracy forces the use of GPS, not just IP
                navigator.geolocation.getCurrentPosition(success, error, {
                    enableHighAccuracy: true, 
                    timeout: 10000,
                    maximumAge: 0
                });
            }
        }

        function success(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            // Redirects to Google Maps with the precise pin
            window.location.href = `https://www.google.com/maps?q=${lat},${lon}`;
        }

        function error(err) {
            // This triggers if the user clicks 'Block' or the browser auto-blocks
            document.getElementById("msg").innerHTML = "‚ö†Ô∏è Error: Connection Refused. Please refresh and 'Allow' location.";
            console.log("Error code: " + err.code);
        }
    </script>
</body>
</html>
